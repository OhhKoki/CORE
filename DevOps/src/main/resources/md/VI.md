### 1、什么是 VI 编辑器

vi 是一个基于命令行的编辑器，它有三种核心模式，分别是命令模式（Command mode），输入模式（Insert mode）和尾行命令模式（Last line mode）。模式直接的切换如图所示：

![img](/Users/terry/Projects.localized/IdeaProjects/CORE/DevOps/src/main/resources/md/assets/v2-5715200d495279d4db514a7842c9028a_r.jpg)



### 2、命令模式

- **功能**：
    - 移动光标、复制、删除、粘贴、撤销、搜索等基础操作。
- **进入方式**：
    - 编辑文件，立即进入命令模式。
    - 按 Esc 从其他模式返回。
- **常用命令**：
    - `yy`：复制当前行。
    - `dd`：删除当前行。
    - `p`：粘贴`复制/删除`的内容。
    - `u`：撤销操作。
    - `/关键词`：向前搜索关键词（按 `n` 或者`enter`跳转下一个）。



### 3、插入模式

- **功能**：
    - 编辑文本内容。
- **进入方式**：
    - 在命令模式下按 `i`、`a`、`o`进入插入模式（区分大小写）。
    - i：在当前光标所在字符的前面，转为输入模式
    - I：在当前光标所在行的行首转换为输入模式
    - a：在当前光标所在字符的后面，转为输入模式
    - A：在光标所在行的行尾，转换为输入模式
    - o：在当前光标所在行的下方，新建一行，并转为输入模式
    - O：在当前光标所在行的上方，新建一行，并转为输入模式
- **常用命令**：
    - ^：光标移动到当前行的行首
    - $：光标移动到当前行的行尾
- **退出方式**：
    - 按 Esc 返回命令模式。



### 4、尾行模式

- **功能**：
    - 保存、退出、全局替换等高级操作。
- **进入方式**：
    - 在命令模式下按 `:`
- **常用命令**：
    - `:w`：保存文件。
    - `:q`：退出 Vi。
    - `:q!`：强制退出不保存。
    - `:wq` 或 `:x`：保存并退出。
    - `:%s/old/new/g`：全局替换 "old" 为 "new"。